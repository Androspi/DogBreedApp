"use strict";(self.webpackChunkDogBreedApp=self.webpackChunkDogBreedApp||[]).push([[718],{6718:(A,l,n)=>{n.r(l),n.d(l,{DogsComponent:()=>T});var c=n(5557),t=n(5879),d=n(3346),m=n(1896),p=n(6283),o=n(6814),h=n(7293),f=n(5309),u=n(5135),E=n(2296),_=n(3176),P=n(617),M=n(2596),v=n(1281),O=n(7304),D=n(2647);function C(a,g){if(1&a&&(t.TgZ(0,"section",6)(1,"h5",7),t._uU(2),t.qZA()()),2&a){const e=t.oxw();t.xp6(2),t.AsE(" ",e.loadedImages.length,"/",e.images.length," resultados ")}}function I(a,g){1&a&&(t.ynx(0),t.TgZ(1,"p"),t._uU(2,"No pets available"),t.qZA(),t.BQk())}function b(a,g){if(1&a){const e=t.EpF();t.TgZ(0,"mat-grid-tile")(1,"div",8),t._UZ(2,"canvas",9,10),t.TgZ(4,"img",11),t.NdJ("error",function(s){return s.target.src="assets/images/dog-adopted.jpg"}),t.qZA(),t.TgZ(5,"button",12),t.NdJ("click",function(){t.CHM(e);const s=t.MAs(3);return t.KtG(s.animate())}),t.TgZ(6,"mat-icon"),t._uU(7,"pets"),t.qZA()(),t.TgZ(8,"div",13),t._UZ(9,"img",14)(10,"div",15),t.qZA()()()}if(2&a){const e=g.$implicit;t.xp6(4),t.Q6J("ngSrc",e),t.xp6(6),t.Q6J("appBreed",e)}}let T=(()=>{class a{get breed(){return this.route.queryParams.getValue().find}constructor(e,i){this.breeds=e,this.route=i,this.listeners=[],this.images=[],this.loadedImages=[],this.paginator={limit:18,page:1},this.gettingImages=!1,this.isMobile=!1}ngAfterViewInit(){setTimeout(()=>{this.queryParamSubscription$=this.route.queryParams.subscribe(({find:i=""})=>{null!=i&&this.replace({find:i||void 0,limit:i?void 0:this.paginator.limit})});const e=()=>this.isMobile=window.innerWidth<600;e(),window.addEventListener("resize",e),this.listeners.push({parent:window,id:"resize",callback:e})},0)}replace(e){this.getImages(e).then(i=>{this.images=i;const{limit:s,page:r}=this.paginator;this.loadedImages=i.slice(0,s*r)})}load(){if(this.gettingImages)return;this.gettingImages=!0,this.paginator.page++;const{limit:e,page:i}=this.paginator;this.breed?(this.loadedImages.length>=this.images.length||(this.loadedImages=this.images.slice(0,e*i)),this.gettingImages=!1):this.getImages({find:void 0,limit:1.5*e}).then(r=>{this.images=[...new Set([...this.images,...r])],this.loadedImages=this.images.slice(0,e*i),this.gettingImages=!1})}getImages(e){return this.imageSubscription$?.unsubscribe(),new Promise(i=>this.imageSubscription$=this.breeds.images(e).subscribe(s=>i(s)))}ngOnDestroy(){this.listeners.forEach(({callback:e,id:i,parent:s})=>s.removeEventListener(i,e)),this.queryParamSubscription$?.unsubscribe(),this.imageSubscription$?.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(d.e),t.Y36(m.gz))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-dogs"]],standalone:!0,features:[t.jDz],decls:10,vars:11,consts:[["id","dogs-content","infiniteScroll","",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["section",""],["id","filter-section",4,"ngIf"],[4,"ngIf"],["rowHeight","17:20","gutterSize","17px",3,"cols"],[4,"ngFor","ngForOf"],["id","filter-section"],[1,"mat-headline-5","m-0","me-3",2,"font-weight","500","color","var(--app-cl2)","line-height","2.2rem"],[1,"simple-card","c-pointer"],["appConfetti",""],["confetti","appConfetti"],["fill","",1,"background-image",3,"ngSrc","error"],["appWaitingBtn","","float","right/top","mat-mini-fab","","matTooltip","Adopt","color","primary","aria-label","Adopt",1,"floating-element","adopt-btn",3,"click"],[1,"content","scrollbar"],["ngSrc","assets/images/shape-below.svg","fill","",1,"background-image"],[3,"appBreed"]],template:function(i,s){1&i&&(t._UZ(0,"app-header")(1,"app-searcher"),t.TgZ(2,"article",0,1),t.NdJ("scrolled",function(){return s.load()}),t.YNc(4,C,3,2,"section",2),t.ALo(5,"async"),t.ALo(6,"queryParam"),t.YNc(7,I,3,0,"ng-container",3),t.TgZ(8,"mat-grid-list",4),t.YNc(9,b,11,2,"mat-grid-tile",5),t.qZA()()),2&i&&(t.xp6(2),t.Q6J("infiniteScrollDistance",.5)("infiniteScrollThrottle",50)("scrollWindow",!1),t.xp6(2),t.Q6J("ngIf",t.lcZ(5,7,t.lcZ(6,9,"find"))),t.xp6(3),t.Q6J("ngIf",!s.loadedImages.length),t.xp6(1),t.Q6J("cols",s.isMobile?2:6),t.xp6(1),t.Q6J("ngForOf",s.loadedImages))},dependencies:[c.m,p.Ry,o.Zd,h.n,f.W,u.J,E.nh,_.Il,_.DX,P.Hw,M.gM,o.sg,o.O5,v.P,O.G,o.Ov,D._],styles:["[_nghost-%COMP%]{background:var(--app-bg1);flex-direction:column;height:100vh;display:flex}[_nghost-%COMP%]     .header-link{color:var(--app-cl1)}#dogs-content[_ngcontent-%COMP%]{padding:0 8vw 2vh;overflow:auto;flex-grow:1;height:100%}.adopt-btn[_ngcontent-%COMP%]{z-index:2}.mat-grid-tile[_ngcontent-%COMP%]{box-shadow:0 6px 10px var(--app-sw1);overflow:visible!important}.simple-card[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{transition:all .5s ease;opacity:1}.simple-card[_ngcontent-%COMP%]:hover > img[_ngcontent-%COMP%]{filter:brightness(120%)}.simple-card[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{pointer-events:none;position:absolute;z-index:3}#filter-section[_ngcontent-%COMP%]{border-radius:0 0 8px 8px;background:var(--app-bg1);padding-bottom:.5rem;display:inline-flex;margin-bottom:1rem;align-items:center;padding-right:10px;padding-left:10px;margin-left:-10px;position:sticky;z-index:5;top:0}"]})}return a})()}}]);